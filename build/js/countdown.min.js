/*! countdown.js 25-11-2013 */
!function(){"use strict";window.Countdown=window.Countdown||{},window.extend=function(obj,extObj){if(arguments.length>2)for(var a=1;a<arguments.length;a++)extend(obj,arguments[a]);else for(var i in extObj)obj[i]=extObj[i];return obj},Countdown=function(conf){this.conf=extend({dateStart:new Date,dateEnd:new Date((new Date).getTime()+864e5),selector:".timer",msgBefore:"Be ready!",msgAfter:"It's over, sorry folks!",msgPattern:"{days} days, {hours} hours, {minutes} minutes and {seconds} seconds left."},conf||{}),this.selector=document.querySelectorAll(this.conf.selector),this.interval=1e3,this.sec=0,this.now=new Date,this.patterns=[{pattern:"{years}",secs:31536e3},{pattern:"{months}",secs:2628e3},{pattern:"{weeks}",secs:604800},{pattern:"{days}",secs:86400},{pattern:"{hours}",secs:3600},{pattern:"{minutes}",secs:60},{pattern:"{seconds}",secs:1}],this.init()},Countdown.prototype.init=function(){this.defineInterval(),this.now<this.conf.dateEnd&&this.now>=this.conf.dateStart?this.run():this.outOfInterval()},Countdown.prototype.run=function(){var nowTS=this.now.valueOf()/1e3,tarTS=this.conf.dateEnd.valueOf()/1e3;this.sec=Math.abs(tarTS-nowTS);var that=this,timer=window.setInterval(function(){that.sec--,that.sec>0?that.display(that.sec):(that.outOfInterval(),clearInterval(timer))},this.interval);this.display(this.sec)},Countdown.prototype.display=function(sec){for(var output=this.conf.msgPattern,i=0,len=this.patterns.length;len>i;i++){var currentPattern=this.patterns[i];if(-1!==this.conf.msgPattern.indexOf(currentPattern.pattern)){var number=Math.floor(sec/currentPattern.secs);sec-=number*currentPattern.secs,output=output.replace(currentPattern.pattern,number)}}for(var i=0,len=this.selector.length;len>i;i++)this.selector[i].innerHTML=output},Countdown.prototype.outOfInterval=function(){for(var message=this.now>this.conf.dateStart?this.conf.msgBefore:this.conf.msgAfter,i=0,len=this.selector.length;len>i;i++)this.selector[i].innerHTML=message},Countdown.prototype.defineInterval=function(){for(var i=this.patterns.length;i>0;i--){var currentPattern=this.patterns[i-1];if(-1!==this.conf.msgPattern.indexOf(currentPattern.pattern))return this.interval=1e3*currentPattern.secs,void 0}}}();